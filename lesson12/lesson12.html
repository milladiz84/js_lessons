<html>

<head>
    <title>JAVASCRIPT</title>
</head>

<body>
    <script>
        // ЗАДАНИЯ ДЛЯ РАЗМИНКИ!!!!!!)))


        //1) Есть функция, которая может принять неограниченное количество аргументов '-', '65', 'a', 'p', реализуйте ее так, что бы она находила дефиз и возвращала '65-a-p'
        function getString(...arr) {
            ///ваш код
        }
        getString('-', '65', 'a', 'p'); // 65-a-p
        getString('75', '-', 'ad', 'hg', '543'); // 75-ad-hg-543

        // Решение ---------------------------------------------------------

        function getString(...arr) {
        // check if '-' exist in arr, do nothing if not exist
            if ( arr.find(element => element === '-') !== undefined ) {

            // remove all '-' from arr array
                arr = arr.filter(function(value){
                    return value !== '-';
                });
            // save last element to variable        
                let lastelement = arr[arr.length-1];
            // remove last element
                arr.length = arr.length-1;
            // add '-' to each element
                arr = arr.map(element => element + '-');
            // add last element to new array
                arr.push(lastelement);
            // convert array to string
            return arr.join("");
            }
        }
        console.log(getString('-', '65', 'a', '-', 'p', '-', 'abc', '-'))


        //2)  Перехватит ли catch здесь ошибку
        new Promise((resolve, reject) => {
        resolve('dffsd')
        }).then((vasia) => { 
            var df= dfdf; //  ошибка вот она синтаксическая!
            return 3423;
        })
        .catch((e)=> console.log('fdsfd', e));//да, перехватит ошибку
         // или здесь
         new Promise((resolve, reject) => {
        resolve('dffsd')
        }).then((vasia) => { 
            throw new Error('new errror'); // вот явно бросаем ошибку 
            return 3423;
        })
        .catch((e)=> console.log('fdsfd', e));// да, перехватит ошибку

        // 3) Взял с проекта код!! Нужно всего лишь переписать на async await :) Запускать не нужно ибо не сработает), просто переписать а я посмотрю!
        let uploadedImage ='_.jpg';
        function pickImage() {
            let context = imagepicker.create({
                mode: 'single'
            });
            context
                .authorize()
                .then(() => {
                    return context.present();
                })
                .then((selection) => {
                    selection.forEach((selected) => {
                        uploadedImage= selected;
                        cropImage();
                    });
                });
        }
        //----------------------------async (pickImage)-----------------------------------
        
        async function pickImage {
            let context = imagepicker.create({
                mode: 'single'
            }); 
            const isAuthorize = await context.authorize();
                if(isAuthorize) {
                    const selection = context.present();
                }
                for(const selection of selection) {
                    uploadedImage = selection;
                    await cropImage();
                    takePhoto();
                }
        //-----------------------------async (cropImage)-----------------------------------
        async function cropImage() {
            const source = new imageSource.ImageSource();
            const _source = await source.fromAsset(this.uploadedImage);
            const args = await this.imageCropper;
                if (args.image !== null) {
                    savePictureToFile(args.image);
                }
        }
        //-----------------------async takePhoto-------------------------------------------

        async function takePhoto() {
            try {
                await camera.requestPermissions();
                let imageAsset = await camera.takePicture();
                uploadedImage = imageAsset;
                await cropImage();

            } catch (e) {
                console.log('error', e)
            }
           

        }


        /**
         * Takes camera photo
         */
        function takePhoto() {
            camera.requestPermissions().then(() => {
                camera.takePicture()
                    .then((imageAsset) => {
                        uploadedImage = imageAsset;
                        cropImage();
                    });
            });
        }

        /**
         * Crops picture
         */
         function cropImage() {
            let source = new imageSource.ImageSource();
            source.fromAsset(this.uploadedImage).then(source => {
                this.imageCropper
                    .show(source, cropOptions)
                    .then(args => {
                        if (args.image !== null) {
                            savePictureToFile(args.image);
                        }
                    });
            });
        }

        /**
         * Crops picture
         */
         function savePictureToFile(image) {
            const folder = fs.knownFolders.documents();
            const path = fs.path.join(folder.path, "Temp" + Date.now() + ".png");
            const saved = image.saveToFile(path, "png");
            if (saved) {
                this.currentImage = image;
                this.pictureSelected.emit(path);
            }
        }

        function cropOptions() {
            return isAndroid ? {
                width: 512,
                height: 512
            } : {
                    lockSquare: true
                };
        }

        pickImage()

        // 4) И закрепляем промисы  
        // https://playwithpromise.herokuapp.com/api/order-review/last -
         setTimeout(() => {
             // вернуть строку https://playwithpromise.herokuapp.com/api/order-review/last через 3 секунды и только тогда сделать запрос по этой строке!
         }, 3000)

         // 5) Ну и последнее так уже чтобы расслабиться)! Пишем свой собственный push!!
         function push(array) {
             // ваш код
             return array;
         }
         //Решение----------------------------------------------------


        let mainArray = ['a', 'b', 'c']

        function push(array) {
            let length = 0;
            for(let i = 0; i < array.length; i++) {
                mainArray[mainArray.length] = array[i]; 
            }
            length = mainArray.length
            return length;
        }

        let newlength = push(['1', 'ddd']);
        console.log(`New length = ${newlength}, new array = `, mainArray);





    </script>
</body>

</html>